<div class="container-fluid" id="container">
    <!-- <div><button (click)="goBack()" class="btn btn-primary">Go back</button></div> -->

    <!-- user profile -->
    <div *ngIf="!updateInfos" class="col-sm-8 facebook-style" id="profile-infos">
        <div class="col-sm-3">
            <img [src]="user.imageURL" width="250px" height="250px" class="rounded-circle"
                alt="{{user.firstName}} {{user.familyName}} is profile picture">
        </div>
        <div class="col-sm-5">
            <h2>{{ user.firstName }} {{ user.familyName }}</h2>
            <h4><i class="fas fa-envelope"></i> {{ user.email }}</h4>
            <h4><i class="fas fa-phone-square-alt"></i> {{ user.phoneNumber }}</h4>
            <h4>Sign up in : {{ user.created_at.toDate() | date:'MMMM d, y --- hh:mm aa' }}</h4>
            <h4>Role : {{ user.role }}</h4>
        </div>
    </div>
    <div *ngIf="!updateInfos" class="col-sm-8" style="margin: 11px auto;">
        <button *ngIf="!updateInfos" class="btn btn-warning" style="float: right;" (click)="onUpdateBTN()">
            Edit profile
        </button>
    </div>

    <!-- to update profile info -->
    <form *ngIf="updateInfos" [formGroup]="updateInfosForm" (ngSubmit)="onSubmit()" class="col-sm-6 form facebook-style" id="form">
        <div>
            <span *ngIf="!fileUploaded" (click)="onUpdateBTN()" id="close-form" title="Cancel edit & go back to profile">
                <i class="fas fa-times-circle"></i>
            </span>
        </div>
        <h2 style="width: fit-content; margin: 0 auto 50px auto;">
            Update your profile
        </h2>
        <!-- edit photo -->
        <div class="form-group">
            <span style="display: flex; align-items: center;justify-content: space-around;">
                <span>
                    <h3>Ajouter une photo</h3>
                    <input type="file" (change)="detectFiles($event)" accept="image/*">
                    <br>
                    <span *ngIf="fileUploaded" class="text-success">
                        Fichier charg√© !
                    </span>
                </span>
                <img [src]="user.imageURL" class="rounded-circle"
                     style="width:150px; height:150px;"
                     alt="{{user.firstName}} {{user.familyName}} is profile picture">
            </span>
            <progress value="persentage" max="100" style="width:100%; margin: 5px 0;">
                {{ persentage }}
            </progress>
        </div>
        <!-- edit first name -->
        <div class="form-group" id="firstName-div">
            <label for="firstName">First Name</label> <br>
            <input formControlName="firstName" type="text" class="form-control">
        </div>
        <div class="form-group" id="familyName-div">
            <label for="familyName">Family Name</label> <br>
            <input formControlName="familyName" type="text" class="form-control">
        </div>
        <div class="form-group" id="phoneNumber-div">
            <label for="phoneNumber">Phone Number</label> <br>
            <input formControlName="phoneNumber" type="tel" class="form-control">
        </div>
        <div class="form-group" id="email-div">
            <label for="email">Email</label> <br>
            <input formControlName="email" type="email" class="form-control">
        </div>
        <br>
        <div *ngIf="isAdmin()">
            <select class="form-select" style="border: 1px solid rgb(255, 161, 72);"
                    formControlName="role">
                <option value="{{role}}" hidden>{{role}}</option>
                <option value="subscriber">subscriber</option>
                <option value="analyst">analyst</option>
                <option value="editor">editor</option>
                <option value="admin">admin</option>
            </select>
        </div>
        <br>
        <div>
            <button type="submit" 
                    class="btn btn-success" title="Save changes & go back to profile"
                    [disabled]="updateInfosForm.invalid || fileIsUploading">
                Save changes
            </button>
            <button id="delete-account-btn" class="btn btn-danger" (click)="deleteUser()">Delete account</button>
        </div>
        <!-- <div>the role selected is : {{roleSelected}}</div> -->
    </form>
</div>

<!-- THE END -->

<!-- [(ngModel)]="roleSelected" -->